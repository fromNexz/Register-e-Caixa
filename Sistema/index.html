<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <title>Oficina Manager</title>
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/components.css" />
</head>

<body>
    <div class="app">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar__brand">
                <div class="brand-title">Oficina Manager</div>
                <div class="brand-subtitle">Sistema de Gestão</div>
            </div>

            <nav class="sidebar__nav">
                <button class="nav-item active" data-view="dashboard">
                    <img class="nav-icon" src="assets/icons/dashboard.svg" alt="" />
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" data-view="clientes">
                    <img class="nav-icon" src="assets/icons/clientes.svg" alt="" />
                    <span>Clientes</span>
                </button>
                <button class="nav-item" data-view="os">
                    <img class="nav-icon" src="assets/icons/os.svg" alt="" />
                    <span>Ordens de Serviço</span>
                </button>
                <button class="nav-item" data-view="caixa">
                    <img class="nav-icon" src="assets/icons/caixa.svg" alt="" />
                    <span>Caixa</span>
                </button>
                <button class="nav-item" data-view="relatorios">
                    <img class="nav-icon" src="assets/icons/relatorios.svg" alt="" />
                    <span>Relatórios</span>
                </button>
            </nav>
        </aside>

        <!-- CONTEÚDO -->
        <main class="main">
            <!-- DASHBOARD -->
            <section id="view-dashboard" class="view active">
                <header class="page-header">
                    <div>
                        <h1>Dashboard</h1>
                        <p>Visão geral do seu negócio</p>
                    </div>
                </header>

                <div class="cards-grid">
                    <div class="card">
                        <span class="card-label">Total Entradas</span>
                        <strong id="dash-total-entradas">R$ 0,00</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Total Saídas</span>
                        <strong id="dash-total-saidas">R$ 0,00</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Saldo</span>
                        <strong id="dash-saldo">R$ 0,00</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">OS Pendentes</span>
                        <strong id="dash-os-pendentes">0</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Clientes c/ Pendência</span>
                        <strong id="dash-clientes-pendentes">0</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Total Clientes</span>
                        <strong id="dash-total-clientes">0</strong>
                    </div>
                </div>
            </section>

            <!-- CLIENTES -->
            <section id="view-clientes" class="view">
                <header class="page-header">
                    <div>
                        <h1>Clientes</h1>
                        <p>Gerencie seus clientes e pendências</p>
                    </div>
                    <button class="btn primary" id="btn-novo-cliente">+ Novo Cliente</button>
                </header>

                <div class="page-toolbar">
                    <input type="text" id="clientes-busca" class="input"
                        placeholder="Buscar por nome, telefone ou email..." />
                </div>

                <div class="card table-card">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Contato</th>
                                <th>CPF/CNPJ</th>
                                <th>Status</th>
                                <th class="col-acoes">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="clientes-tbody">
                            <tr class="empty-row">
                                <td colspan="4">Nenhum cliente encontrado</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Modal simples de cliente -->
                <div id="modal-cliente" class="modal">
                    <div class="modal__backdrop"></div>
                    <div class="modal__content">
                        <header class="modal__header">
                            <h2 id="modal-cliente-titulo">Novo Cliente</h2>
                        </header>
                        <form id="form-cliente" class="modal__body">
                            <input type="hidden" id="cliente-id" />
                            <label>
                                Nome
                                <input type="text" id="cliente-nome" required />
                            </label>
                            <label>
                                Telefone
                                <input type="text" id="cliente-telefone" />
                            </label>
                            <label>
                                Endereço
                                <input type="text" id="cliente-endereco" />
                            </label>
                            <label>
                                Modelo do veículo
                                <input type="text" id="cliente-veiculo-modelo" placeholder="Ex: Gol 1.6" />
                            </label>
                            <label>
                                Ano do veículo
                                <input type="text" id="cliente-veiculo-ano" placeholder="Ex: 2014" />
                            </label>

                            <label>
                                Placa
                                <input type="text" id="cliente-veiculo-placa" placeholder="Ex: ABC-1234" />
                            </label>
                            <label>
                                Email
                                <input type="email" id="cliente-email" />
                            </label>
                            <label>
                                CPF/CNPJ
                                <input type="text" id="cliente-documento" />
                            </label>
                            <label>
                                Observações
                                <textarea id="cliente-observacoes"></textarea>
                            </label>
                            <footer class="modal__footer">
                                <button type="button" class="btn" id="btn-cancelar-cliente">Cancelar</button>
                                <button type="submit" class="btn primary">Salvar</button>
                            </footer>
                        </form>
                    </div>
                </div>

                <div id="modal-cliente-detalhes" class="modal">
                    <div class="modal__backdrop"></div>
                    <div class="modal__content modal__content--wide">
                        <header class="modal__header">
                            <h2>Detalhes do Cliente</h2>
                        </header>
                        <div class="modal__body modal-cliente-detalhes-body">
                            <section class="cliente-info">
                                <h3>Dados do Cliente</h3>
                                <p><strong>Nome:</strong> <span id="det-cliente-nome"></span></p>
                                <p><strong>Contato:</strong> <span id="det-cliente-contato"></span></p>
                                <p><strong>CPF/CNPJ:</strong> <span id="det-cliente-doc"></span></p>
                                <p><strong>Endereço:</strong> <span id="det-cliente-endereco"></span></p>
                                <p><strong>Observações:</strong> <span id="det-cliente-obs"></span></p>
                            </section>

                            <section class="cliente-historico">
                                <h3>Histórico de Serviços</h3>
                                <div class="card table-card">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>OS Nº</th>
                                                <th>Data</th>
                                                <th>Descrição</th>
                                                <th>Valor</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="det-cliente-os-tbody">
                                            <tr class="empty-row">
                                                <td colspan="5">Nenhum serviço registrado para este cliente</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </section>
                        </div>
                        <footer class="modal__footer">
                            <button type="button" class="btn" id="btn-fechar-detalhes-cliente">Fechar</button>
                        </footer>
                    </div>
                </div>

            </section>

            <!-- ORDENS DE SERVIÇO -->
            <section id="view-os" class="view">
                <header class="page-header">
                    <div>
                        <h1>Ordens de Serviço</h1>
                        <p>Gerencie as ordens de serviço da oficina</p>
                    </div>
                    <button class="btn primary" id="btn-nova-os">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Nova OS
                    </button>
                </header>

                <!-- Filtros e Busca -->
                <div class="os-toolbar">
                    <div class="os-search-box">
                        <svg class="os-search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        <input type="text" id="os-busca" class="os-search-input" placeholder="Buscar por nº da OS, cliente ou veículo..." />
                    </div>
                    <div class="os-filters">
                        <select id="os-filtro-status" class="os-filter-select">
                            <option value="">Todos os status</option>
                            <option value="aberto">Aberto</option>
                            <option value="em_andamento">Em andamento</option>
                            <option value="concluido">Concluído</option>
                            <option value="cancelado">Cancelado</option>
                        </select>
                    </div>
                </div>

                <!-- Cards de Resumo -->
                <div class="os-summary-cards">
                    <div class="os-summary-card">
                        <div class="os-summary-icon os-summary-icon--total">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                            </svg>
                        </div>
                        <div class="os-summary-info">
                            <span class="os-summary-label">Total de OS</span>
                            <strong id="os-total-count">0</strong>
                        </div>
                    </div>
                    <div class="os-summary-card">
                        <div class="os-summary-icon os-summary-icon--open">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                        </div>
                        <div class="os-summary-info">
                            <span class="os-summary-label">Em Aberto</span>
                            <strong id="os-open-count">0</strong>
                        </div>
                    </div>
                    <div class="os-summary-card">
                        <div class="os-summary-icon os-summary-icon--progress">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"></path>
                            </svg>
                        </div>
                        <div class="os-summary-info">
                            <span class="os-summary-label">Em Andamento</span>
                            <strong id="os-progress-count">0</strong>
                        </div>
                    </div>
                    <div class="os-summary-card">
                        <div class="os-summary-icon os-summary-icon--done">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                        </div>
                        <div class="os-summary-info">
                            <span class="os-summary-label">Concluídas</span>
                            <strong id="os-done-count">0</strong>
                        </div>
                    </div>
                </div>

                <!-- Tabela de OS -->
                <div class="os-table-container">
                    <table class="os-table">
                        <thead>
                            <tr>
                                <th class="os-col-num">Nº</th>
                                <th class="os-col-date">Data</th>
                                <th class="os-col-client">Cliente</th>
                                <th class="os-col-vehicle">Veículo</th>
                                <th class="os-col-value">Valor</th>
                                <th class="os-col-payment">Pagamento</th>
                                <th class="os-col-status">Status</th>
                                <th class="os-col-actions">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="os-tbody">
                            <tr class="os-empty-row">
                                <td colspan="8">
                                    <div class="os-empty-state">
                                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                            <line x1="12" y1="18" x2="12" y2="12"></line>
                                            <line x1="9" y1="15" x2="15" y2="15"></line>
                                        </svg>
                                        <p>Nenhuma ordem de serviço encontrada</p>
                                        <span>Clique em "Nova OS" para criar a primeira</span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Modal Nova/Editar OS -->
                <div id="modal-os" class="modal">
                    <div class="modal__backdrop"></div>
                    <div class="os-modal-content">
                        <header class="os-modal-header">
                            <div class="os-modal-title-area">
                                <h2 id="modal-os-titulo">Nova Ordem de Serviço</h2>
                                <span id="os-numero-display" class="os-numero-badge"></span>
                            </div>
                            <button type="button" class="os-modal-close" id="btn-close-os">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </header>

                        <form id="form-os" class="os-modal-form">
                            <input type="hidden" id="os-id" />

                            <div class="os-form-grid">
                                <!-- Coluna Esquerda: Dados da OS -->
                                <div class="os-form-section">
                                    <div class="os-section-header">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                        </svg>
                                        <h3>Dados da OS</h3>
                                    </div>

                                    <div class="os-form-group">
                                        <label class="os-label" for="os-cliente-id">Cliente *</label>
                                        <select id="os-cliente-id" class="os-select" required></select>
                                    </div>

                                    <div class="os-form-row">
                                        <div class="os-form-group">
                                            <label class="os-label" for="os-veiculo">Veículo</label>
                                            <input type="text" id="os-veiculo" class="os-input" placeholder="Ex: Gol 1.6 2014 - ABC-1234" />
                                        </div>
                                    </div>

                                    <div class="os-form-row os-form-row--half">
                                        <div class="os-form-group">
                                            <label class="os-label" for="os-data-abertura">Data Abertura</label>
                                            <input type="date" id="os-data-abertura" class="os-input" />
                                        </div>
                                        <div class="os-form-group">
                                            <label class="os-label" for="os-status">Status</label>
                                            <select id="os-status" class="os-select">
                                                <option value="aberto">Aberto</option>
                                                <option value="em_andamento">Em andamento</option>
                                                <option value="concluido">Concluído</option>
                                                <option value="cancelado">Cancelado</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="os-form-group">
                                        <label class="os-label" for="os-descricao">Descrição do Serviço</label>
                                        <textarea id="os-descricao" class="os-textarea" rows="3" placeholder="Descreva os serviços realizados..."></textarea>
                                    </div>

                                    <div class="os-form-group">
                                        <label class="os-label" for="os-valor-total">Valor Total (R$) *</label>
                                        <input type="number" step="0.01" min="0" id="os-valor-total" class="os-input os-input--currency" placeholder="0,00" />
                                    </div>
                                </div>

                                <!-- Coluna Direita: Pagamento e Parcelas -->
                                <div class="os-form-section">
                                    <div class="os-section-header">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                            <line x1="1" y1="10" x2="23" y2="10"></line>
                                        </svg>
                                        <h3>Pagamento</h3>
                                    </div>

                                    <div class="os-payment-config">
                                        <div class="os-form-row os-form-row--thirds">
                                            <div class="os-form-group">
                                                <label class="os-label" for="os-numero-parcelas">Parcelas</label>
                                                <input type="number" id="os-numero-parcelas" class="os-input" min="1" max="48" value="1" />
                                            </div>
                                            <div class="os-form-group">
                                                <label class="os-label" for="os-data-primeira-parcela">1ª Parcela</label>
                                                <input type="date" id="os-data-primeira-parcela" class="os-input" />
                                            </div>
                                            <div class="os-form-group os-form-group--btn">
                                                <button type="button" class="os-btn-generate" id="btn-gerar-parcelas">
                                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                        <polyline points="23 4 23 10 17 10"></polyline>
                                                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                                                    </svg>
                                                    Gerar
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="os-parcelas-container">
                                        <div class="os-parcelas-header">
                                            <span>Parcelas</span>
                                            <span id="os-parcelas-total" class="os-parcelas-total">Total: R$ 0,00</span>
                                        </div>
                                        <div class="os-parcelas-list" id="os-parcelas-tbody">
                                            <div class="os-parcela-empty">
                                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                                    <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                                    <line x1="1" y1="10" x2="23" y2="10"></line>
                                                </svg>
                                                <p>Nenhuma parcela gerada</p>
                                                <span>Preencha o valor e clique em "Gerar"</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <footer class="os-modal-footer">
                                <button type="button" class="os-btn os-btn--cancel" id="btn-cancelar-os">Cancelar</button>
                                <button type="submit" class="os-btn os-btn--save">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                                        <polyline points="17 21 17 13 7 13 7 21"></polyline>
                                        <polyline points="7 3 7 8 15 8"></polyline>
                                    </svg>
                                    Salvar OS
                                </button>
                            </footer>
                        </form>
                    </div>
                </div>

                <!-- Modal Detalhes OS -->
                <div id="modal-os-detalhes" class="modal">
                    <div class="modal__backdrop"></div>
                    <div class="os-modal-content os-modal-content--details">
                        <header class="os-modal-header">
                            <div class="os-modal-title-area">
                                <h2>Detalhes da OS</h2>
                                <span id="os-det-numero" class="os-numero-badge"></span>
                            </div>
                            <button type="button" class="os-modal-close" id="btn-close-os-det">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </header>
                        <div class="os-details-body" id="os-details-content">
                            <!-- Conteúdo dinâmico -->
                        </div>
                        <footer class="os-modal-footer">
                            <button type="button" class="os-btn os-btn--cancel" id="btn-fechar-os-det">Fechar</button>
                            <button type="button" class="os-btn os-btn--edit" id="btn-editar-os-det">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                                Editar
                            </button>
                        </footer>
                    </div>
                </div>

            </section>



            <!-- CAIXA -->
            <section id="view-caixa" class="view">
                <header class="page-header">
                    <div>
                        <h1>Caixa</h1>
                        <p>Controle de entradas e saídas</p>
                    </div>
                    <div class="page-header-actions">
                        <button class="btn success" id="btn-nova-entrada">Nova Entrada</button>
                        <button class="btn danger" id="btn-nova-saida">Nova Saída</button>
                    </div>
                </header>

                <div class="cards-grid cards-grid--caixa">
                    <div class="card">
                        <span class="card-label">Total Entradas</span>
                        <strong id="caixa-total-entradas">R$ 0,00</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Total Saídas</span>
                        <strong id="caixa-total-saidas">R$ 0,00</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Saldo</span>
                        <strong id="caixa-saldo">R$ 0,00</strong>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab active" data-caixa-filter="todas">Todas</button>
                    <button class="tab" data-caixa-filter="entrada">Entradas</button>
                    <button class="tab" data-caixa-filter="saida">Saídas</button>
                </div>

                <div class="card table-card">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Tipo</th>
                                <th>Descrição</th>
                                <th>Cliente</th>
                                <th>Forma Pgto</th>
                                <th>Valor</th>
                                <th class="col-acoes">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="caixa-tbody">
                            <tr class="empty-row">
                                <td colspan="7">Nenhuma transação encontrada</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- RELATÓRIOS -->
            <section id="view-relatorios" class="view">
                <header class="page-header">
                    <div>
                        <h1>Relatórios</h1>
                        <p>Análise financeira e operacional</p>
                    </div>
                    <button class="btn outline" id="btn-exportar-relatorio">Exportar Relatório</button>
                </header>

                <div class="card filters-card">
                    <div class="filters-row">
                        <div class="filter-field">
                            <label>Data Início</label>
                            <input type="date" id="rel-data-inicio" class="input" />
                        </div>
                        <div class="filter-field">
                            <label>Data Fim</label>
                            <input type="date" id="rel-data-fim" class="input" />
                        </div>
                        <div class="filter-field filter-field--button">
                            <button class="btn primary" id="btn-aplicar-filtros-rel">Aplicar Filtros</button>
                        </div>
                    </div>
                </div>

                <div class="tabs tabs--rel">
                    <button class="tab active" data-rel-tab="financeiro">Financeiro</button>
                    <button class="tab" data-rel-tab="operacional">Operacional</button>
                    <button class="tab" data-rel-tab="clientes">Clientes</button>
                </div>

                <div id="rel-financeiro" class="rel-tab active">
                    <div class="cards-grid">
                        <div class="card">
                            <span class="card-label">Total Entradas (período)</span>
                            <strong id="rel-ent-periodo">R$ 0,00</strong>
                        </div>
                        <div class="card">
                            <span class="card-label">Total Saídas (período)</span>
                            <strong id="rel-sai-periodo">R$ 0,00</strong>
                        </div>
                        <div class="card">
                            <span class="card-label">Saldo do Período</span>
                            <strong id="rel-saldo-periodo">R$ 0,00</strong>
                            <small id="rel-saldo-status" class="tag tag-positive">Positivo</small>
                        </div>
                    </div>

                    <div class="card table-card">
                        <h2 class="card-title">Detalhamento de Transações</h2>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Tipo</th>
                                    <th>Descrição</th>
                                    <th>Cliente</th>
                                    <th>Forma Pgto</th>
                                    <th>Valor</th>
                                </tr>
                            </thead>
                            <tbody id="rel-transacoes-tbody">
                                <tr class="empty-row">
                                    <td colspan="6">Nenhuma transação no período selecionado</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </section>
        </main>
        <div id="toast-container"></div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/router.js"></script>
    <script src="js/clientes.js"></script>
    <script src="js/main.js"></script>
    <script src="js/os.js"></script>
    <script src="js/caixa.js"></script>
    <script src="js/relatorios.js"></script>
    <script src="js/dashboard.js"></script>
</body>

</html>