<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oficina Manager - Sistema Profissional</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Bibliotecas para Exporta√ß√£o -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <!-- Seu CSS -->
    <link rel="stylesheet" href="css/style.css">

</head>

<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <i class="fas fa-tools"></i>
                <div class="brand-text">
                    <h1>Oficina Manager</h1>
                    <p>Professional Pro</p>
                </div>
            </div>

            <nav class="nav-menu">
                <button class="nav-link active" data-view="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </button>
                <button class="nav-link" data-view="clientes">
                    <i class="fas fa-users"></i>
                    <span>Clientes</span>
                </button>
                <button class="nav-link" data-view="os">
                    <i class="fas fa-file-invoice"></i>
                    <span>Ordens de Servi√ßo</span>
                </button>
                <button class="nav-link" data-view="caixa">
                    <i class="fas fa-cash-register"></i>
                    <span>Caixa</span>
                </button>
                <button class="nav-link" data-view="relatorios">
                    <i class="fas fa-chart-column"></i>
                    <span>Relat√≥rios</span>
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- VIEW: DASHBOARD -->
            <section id="view-dashboard" class="view active">
                <div class="header">
                    <div class="header-title">
                        <h2>Painel de Controle</h2>
                        <p id="current-date-display"></p>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-icon icon-revenue"><i class="fas fa-dollar-sign"></i></div>
                        <div class="stat-info">
                            <h3>Receita Mensal</h3>
                            <p id="dash-receita">R$ 0,00</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon icon-orders"><i class="fas fa-clipboard-list"></i></div>
                        <div class="stat-info">
                            <h3>OS Conclu√≠das</h3>
                            <p id="dash-os-concluidas">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon icon-clients"><i class="fas fa-user-friends"></i></div>
                        <div class="stat-info">
                            <h3>Novos Clientes</h3>
                            <p id="dash-novos-clientes">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon icon-pending"><i class="fas fa-exclamation-circle"></i></div>
                        <div class="stat-info">
                            <h3>OS Pendentes</h3>
                            <p id="dash-os-pendentes">0</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: CLIENTES -->
            <section id="view-clientes" class="view">
                <div class="header">
                    <div class="header-title">
                        <h2>Gest√£o de Clientes</h2>
                        <p>Gerencie sua base de contatos</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="btn-novo-cliente">
                            <i class="fas fa-plus"></i> Novo Cliente
                        </button>
                    </div>
                </div>
                <div class="table-card">
                    <div class="chart-header" style="padding-bottom: 1rem;">
                        <input type="text" id="clientes-busca" class="input-control" placeholder="Pesquisar cliente...">
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nome</th>
                                    <th>Contato</th>
                                    <th>Documento</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="clientes-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- VIEW: OS -->
            <section id="view-os" class="view">
                <div class="header">
                    <div class="header-title">
                        <h2>Ordens de Servi√ßo</h2>
                        <p>Acompanhamento de reparos</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="btn-nova-os">
                            <i class="fas fa-file-medical"></i> Nova OS
                        </button>
                    </div>
                </div>
                <div class="table-card">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>N¬∫ OS</th>
                                    <th>Cliente</th>
                                    <th>Ve√≠culo</th>
                                    <th>Data</th>
                                    <th>Valor</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="os-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- VIEW: CAIXA -->
            <section id="view-caixa" class="view">
                <!-- Bot√£o de Filtros -->
                <div style="margin-bottom: 1.5rem; position: relative; display: inline-block;">
                    <button class="btn btn-outline" id="btn-toggle-filtros" style="padding: 0.7rem 1.5rem;">
                        <i class="fas fa-filter"></i> Filtros
                    </button>

                    <!-- Container de Filtros (Dropdown Menu - Oculto por padr√£o) -->
                    <div id="filtros-container" class="filtros-container-dropdown" style="display: none;">
                        <div class="filtros-busca">
                            <input type="text" id="caixa-busca" class="input-control"
                                placeholder="üîç Pesquisar por descri√ß√£o...">
                        </div>

                        <div class="filtros-opcoes">
                            <div class="filtro-item">
                                <label>Tipo:</label>
                                <select id="filtro-tipo" class="input-control">
                                    <option value="">Todos</option>
                                    <option value="entrada">Entradas</option>
                                    <option value="saida">Sa√≠das</option>
                                </select>
                            </div>

                            <div class="filtro-item">
                                <label>Categoria:</label>
                                <select id="filtro-categoria" class="input-control">
                                    <option value="">Todas</option>
                                    <option value="venda_os">Venda de OS</option>
                                    <option value="venda_pecas">Venda de Pe√ßas</option>
                                    <option value="servico">Servi√ßo Adicional</option>
                                    <option value="devolucao">Devolu√ß√£o</option>
                                    <option value="outros">Outros</option>
                                    <option value="fornecedor">Fornecedor</option>
                                    <option value="funcionarios">Funcion√°rios</option>
                                    <option value="aluguel">Aluguel</option>
                                    <option value="utilidades">Utilidades</option>
                                </select>
                            </div>

                            <div class="filtro-item">
                                <label>Status:</label>
                                <select id="filtro-status" class="input-control">
                                    <option value="">Todos</option>
                                    <option value="confirmado">Confirmado</option>
                                    <option value="pendente">Pendente</option>
                                    <option value="cancelado">Cancelado</option>
                                </select>
                            </div>

                            <div class="filtro-item">
                                <label>Forma de Pagamento:</label>
                                <select id="filtro-forma-pagamento" class="input-control">
                                    <option value="">Todas</option>
                                    <option value="dinheiro">Dinheiro</option>
                                    <option value="pix">PIX</option>
                                    <option value="debito">Cart√£o de D√©bito</option>
                                    <option value="credito">Cart√£o de Cr√©dito</option>
                                    <option value="boleto">Boleto</option>
                                    <option value="cheque">Cheque</option>
                                </select>
                            </div>

                            <div class="filtro-item">
                                <label>Per√≠odo:</label>
                                <div style="display: flex; gap: 8px;">
                                    <input type="date" id="filtro-data-inicio" class="input-control" style="flex: 1;">
                                    <input type="date" id="filtro-data-fim" class="input-control" style="flex: 1;">
                                </div>
                            </div>

                            <button class="btn btn-outline" id="btn-limpar-filtros"
                                style="padding: 0.6rem 1.2rem; font-size: 0.85rem;">
                                <i class="fas fa-redo"></i> Limpar
                            </button>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>Total Entradas</h3>
                            <p id="caixa-total-entradas" style="color:#10b981">R$ 0,00</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>Total Sa√≠das</h3>
                            <p id="caixa-total-saidas" style="color:#ef4444">R$ 0,00</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>Saldo Atual</h3>
                            <p id="caixa-saldo">R$ 0,00</p>
                        </div>
                    </div>
                </div>
                <div class="table-card">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Tipo</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Valor</th>
                                </tr>
                            </thead>
                            <tbody id="caixa-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section data-view="relatorios" class="view-section">
                <div class="section-header">
                    <div>
                        <h2>Relat√≥rios e Exporta√ß√£o</h2>
                        <p>Gest√£o financeira e exporta√ß√£o de dados</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="Relatorios.exportarExcel()">
                            <i class="fas fa-file-excel"></i> Excel
                        </button>
                        <button class="btn btn-primary" onclick="Relatorios.exportarPDF()">
                            <i class="fas fa-file-pdf"></i> PDF
                        </button>
                    </div>
                </div>

                <div class="grid-caixa" style="margin-top: 20px;">
                    <div class="card">
                        <h3>Fluxo de Caixa (Entradas vs Sa√≠das)</h3>
                        <div style="height: 300px; position: relative;">
                            anvas id="chartReceita"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Status das O.S</h3>
                        <div style="height: 300px; position: relative;">
                            anvas id="chartStatus"></canvas>
                        </div>
                    </div>
                </div>
            </section>



        </main>
    </div>

    <!-- MODAL CLIENTE -->
    <div id="modal-cliente" class="modal">
        <div class="modal__backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-cliente-titulo">Novo Cliente</h3>
                <button type="button" class="btn btn-outline" style="padding: 0.5rem 1rem;"
                    id="btn-fechar-modal-cliente">√ó</button>
            </div>
            <form id="form-cliente">
                <div class="modal-body">
                    <input type="hidden" id="cliente-id">

                    <div class="input-group">
                        <label>Nome *</label>
                        <input type="text" id="cliente-nome" class="input-control" required>
                    </div>

                    <div class="os-form-grid">
                        <div class="input-group">
                            <label>Telefone</label>
                            <input type="text" id="cliente-telefone" class="input-control">
                        </div>
                        <div class="input-group">
                            <label>CPF/CNPJ</label>
                            <input type="text" id="cliente-documento" class="input-control">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" id="cliente-email" class="input-control">
                    </div>

                    <div class="input-group">
                        <label>Endere√ßo</label>
                        <input type="text" id="cliente-endereco" class="input-control">
                    </div>

                    <div class="os-form-grid">
                        <div class="input-group">
                            <label>Ve√≠culo (Modelo)</label>
                            <input type="text" id="cliente-veiculo-modelo" class="input-control">
                        </div>
                        <div class="input-group">
                            <label>Ano</label>
                            <input type="text" id="cliente-veiculo-ano" class="input-control">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Placa</label>
                        <input type="text" id="cliente-veiculo-placa" class="input-control" placeholder="ABC-1234">
                    </div>

                    <div class="input-group">
                        <label>Observa√ß√µes</label>
                        <textarea id="cliente-observacoes" class="input-control" rows="3"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" id="btn-cancelar-cliente">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar Cliente</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DETALHES DO CLIENTE -->
    <div id="modal-detalhes-cliente" class="modal">
        <div class="modal__backdrop"></div>
        <div class="modal-content large">
            <div class="modal-header">
                <h3><i class="fas fa-user-circle"></i> Detalhes do Cliente</h3>
                <button type="button" class="btn btn-outline" style="padding: 0.5rem 1rem;"
                    id="btn-fechar-detalhes">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Informa√ß√µes Principais -->
                <div class="cliente-info-card">
                    <div class="cliente-info-header">
                        <div class="cliente-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="cliente-info-main">
                            <h2 id="detalhe-nome">-</h2>
                            <p id="detalhe-id-sequencial" class="cliente-id-badge">-</p>
                        </div>
                        <div class="cliente-actions-quick">
                            <button class="btn btn-primary btn-sm" id="btn-editar-do-detalhe">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn btn-success btn-sm" id="btn-nova-os-do-detalhe">
                                <i class="fas fa-plus"></i> Nova OS
                            </button>
                        </div>
                    </div>

                    <!-- Grid de Informa√ß√µes -->
                    <div class="cliente-info-grid">
                        <div class="info-item">
                            <i class="fas fa-phone"></i>
                            <div>
                                <span class="info-label">Telefone</span>
                                <span class="info-value" id="detalhe-telefone">-</span>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <span class="info-label">Email</span>
                                <span class="info-value" id="detalhe-email">-</span>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-id-card"></i>
                            <div>
                                <span class="info-label">CPF/CNPJ</span>
                                <span class="info-value" id="detalhe-documento">-</span>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                <span class="info-label">Endere√ßo</span>
                                <span class="info-value" id="detalhe-endereco">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Ve√≠culo -->
                    <div class="veiculo-card" id="veiculo-info-container">
                        <h4><i class="fas fa-car"></i> Ve√≠culo</h4>
                        <div class="veiculo-details">
                            <div class="veiculo-item">
                                <span class="info-label">Modelo</span>
                                <span class="info-value" id="detalhe-veiculo-modelo">-</span>
                            </div>
                            <div class="veiculo-item">
                                <span class="info-label">Ano</span>
                                <span class="info-value" id="detalhe-veiculo-ano">-</span>
                            </div>
                            <div class="veiculo-item">
                                <span class="info-label">Placa</span>
                                <span class="info-value" id="detalhe-veiculo-placa">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Observa√ß√µes -->
                    <div class="observacoes-card" id="observacoes-container">
                        <h4><i class="fas fa-sticky-note"></i> Observa√ß√µes</h4>
                        <p id="detalhe-observacoes">-</p>
                    </div>
                </div>

                <!-- Hist√≥rico de OS -->
                <div class="historico-section">
                    <div class="historico-header">
                        <h3><i class="fas fa-history"></i> Hist√≥rico de Ordens de Servi√ßo</h3>
                        <div class="historico-stats">
                            <span class="stat-badge stat-total">
                                <i class="fas fa-clipboard-list"></i>
                                <strong id="stat-total-os">0</strong> Total
                            </span>
                            <span class="stat-badge stat-pendente">
                                <i class="fas fa-exclamation-circle"></i>
                                <strong id="stat-pendente-os">0</strong> Pendentes
                            </span>
                            <span class="stat-badge stat-valor">
                                <i class="fas fa-dollar-sign"></i>
                                <strong id="stat-valor-total">R$ 0,00</strong>
                            </span>
                        </div>
                    </div>

                    <!-- Tabela de Hist√≥rico -->
                    <div class="historico-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>N¬∫ OS</th>
                                    <th>Data</th>
                                    <th>Servi√ßo</th>
                                    <th>Valor</th>
                                    <th>Pagamento</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="historico-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL NOVA/EDITAR OS -->
    <div id="modal-os" class="modal">
        <div class="modal__backdrop"></div>
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="modal-os-titulo"><i class="fas fa-file-invoice"></i> Nova Ordem de Servi√ßo</h3>
            </div>
            <form id="form-os">
                <div class="modal-body">
                    <input type="hidden" id="os-id">

                    <!-- Se√ß√£o 1: Cliente e Ve√≠culo -->
                    <div class="os-section">
                        <h4><i class="fas fa-user"></i> Cliente e Ve√≠culo</h4>

                        <div class="input-group">
                            <label>Cliente *</label>
                            <select id="os-cliente" class="input-control" required>
                                <option value="">Selecione um cliente</option>
                            </select>
                        </div>

                        <div class="os-form-grid">
                            <div class="input-group">
                                <label>Ve√≠culo (Modelo) *</label>
                                <input type="text" id="os-veiculo-modelo" class="input-control"
                                    placeholder="Ex: Fiat Uno" required>
                            </div>
                            <div class="input-group">
                                <label>Placa *</label>
                                <input type="text" id="os-veiculo-placa" class="input-control" placeholder="ABC-1234"
                                    required>
                            </div>
                        </div>

                        <div class="os-form-grid">
                            <div class="input-group">
                                <label>Ano</label>
                                <input type="text" id="os-veiculo-ano" class="input-control" placeholder="2020">
                            </div>
                            <div class="input-group">
                                <label>KM Atual</label>
                                <input type="number" id="os-km" class="input-control" placeholder="50000">
                            </div>
                        </div>
                    </div>

                    <!-- Se√ß√£o 2: Servi√ßo -->
                    <div class="os-section">
                        <h4><i class="fas fa-wrench"></i> Servi√ßo</h4>

                        <div class="input-group">
                            <label>Problema Relatado pelo Cliente *</label>
                            <textarea id="os-problema" class="input-control" rows="3"
                                placeholder="Descreva o problema relatado pelo cliente..." required></textarea>
                        </div>

                        <div class="input-group">
                            <label>Diagn√≥stico T√©cnico</label>
                            <textarea id="os-diagnostico" class="input-control" rows="3"
                                placeholder="Diagn√≥stico feito pela oficina..."></textarea>
                        </div>

                        <div class="input-group">
                            <label>Servi√ßos a Realizar *</label>
                            <textarea id="os-servicos" class="input-control" rows="4"
                                placeholder="Liste os servi√ßos que ser√£o realizados..." required></textarea>
                        </div>
                    </div>

                    <!-- Se√ß√£o 3: Pe√ßas -->
                    <div class="os-section">
                        <h4><i class="fas fa-cog"></i> Pe√ßas e Materiais</h4>

                        <div class="input-group">
                            <label>Pe√ßas Necess√°rias</label>
                            <textarea id="os-pecas" class="input-control" rows="3"
                                placeholder="Liste as pe√ßas necess√°rias (ex: Filtro de √≥leo, Pastilha de freio...)"></textarea>
                        </div>
                    </div>

                    <!-- Se√ß√£o 4: Valores e Prazos -->
                    <div class="os-section">
                        <h4><i class="fas fa-dollar-sign"></i> Valores e Prazos</h4>

                        <div class="os-form-grid">
                            <div class="input-group">
                                <label>Valor da M√£o de Obra (R$)</label>
                                <input type="number" id="os-valor-mao-obra" class="input-control" placeholder="0.00"
                                    step="0.01" min="0">
                            </div>
                            <div class="input-group">
                                <label>Valor das Pe√ßas (R$)</label>
                                <input type="number" id="os-valor-pecas" class="input-control" placeholder="0.00"
                                    step="0.01" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <label>Valor Total (R$) *</label>
                            <input type="number" id="os-valor-total" class="input-control" placeholder="0.00"
                                step="0.01" min="0" required>
                        </div>

                        <div class="os-form-grid">
                            <div class="input-group">
                                <label>Data de Abertura *</label>
                                <input type="date" id="os-data-abertura" class="input-control" required>
                            </div>
                            <div class="input-group">
                                <label>Previs√£o de Entrega</label>
                                <input type="date" id="os-data-previsao" class="input-control">
                            </div>
                        </div>
                    </div>

                    <!-- Se√ß√£o 5: Pagamento e Status -->
                    <div class="os-section">
                        <h4><i class="fas fa-credit-card"></i> Pagamento e Status</h4>

                        <div class="os-form-grid">
                            <div class="input-group">
                                <label>Forma de Pagamento *</label>
                                <select id="os-forma-pagamento" class="input-control" required>
                                    <option value="">Selecione</option>
                                    <option value="dinheiro">Dinheiro</option>
                                    <option value="pix">PIX</option>
                                    <option value="debito">Cart√£o de D√©bito</option>
                                    <option value="credito">Cart√£o de Cr√©dito</option>
                                    <option value="boleto">Boleto</option>
                                    <option value="parcelado">Parcelado</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Status *</label>
                                <select id="os-status" class="input-control" required>
                                    <option value="pendente">Pendente</option>
                                    <option value="em_andamento">Em Andamento</option>
                                    <option value="aguardando_pecas">Aguardando Pe√ßas</option>
                                    <option value="pronto">Pronto para Retirada</option>
                                    <option value="concluido">Conclu√≠do</option>
                                    <option value="cancelado">Cancelado</option>
                                </select>
                            </div>
                        </div>

                        <!-- Parcelamento (aparece apenas se "parcelado" for selecionado) -->
                        <div id="parcelamento-container" style="display: none; margin-top: 1rem;">
                            <div class="os-form-grid">
                                <div class="input-group">
                                    <label>N√∫mero de Parcelas *</label>
                                    <select id="os-num-parcelas" class="input-control">
                                        <option value="">Selecione</option>
                                        <option value="2">2x</option>
                                        <option value="3">3x</option>
                                        <option value="4">4x</option>
                                        <option value="5">5x</option>
                                        <option value="6">6x</option>
                                        <option value="7">7x</option>
                                        <option value="8">8x</option>
                                        <option value="9">9x</option>
                                        <option value="10">10x</option>
                                        <option value="11">11x</option>
                                        <option value="12">12x</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label>Data da 1¬™ Parcela</label>
                                    <input type="date" id="os-data-primeira-parcela" class="input-control">
                                </div>
                            </div>

                            <div class="input-group" style="margin-top: 1rem;">
                                <button type="button" class="btn btn-secondary" id="btn-gerar-parcelas">
                                    <i class="fas fa-calculator"></i> Gerar Parcelas
                                </button>
                            </div>

                            <!-- Tabela de Parcelas -->
                            <div id="parcelas-table-container" style="display: none; margin-top: 1.5rem;">
                                <h5 style="margin-bottom: 1rem; color: #1e293b;">
                                    <i class="fas fa-list"></i> Detalhamento das Parcelas
                                </h5>
                                <div style="overflow-x: auto;">
                                    <table class="parcelas-table">
                                        <thead>
                                            <tr>
                                                <th>Parcela</th>
                                                <th>Data</th>
                                                <th>Descri√ß√£o</th>
                                                <th>Forma</th>
                                                <th>Status</th>
                                                <th>Valor</th>
                                            </tr>
                                        </thead>
                                        <tbody id="parcelas-tbody"></tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="5" style="text-align: right; font-weight: 600;">TOTAL:</td>
                                                <td id="parcelas-total"
                                                    style="font-weight: 700; color: var(--primary);">R$ 0,00</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="input-group" style="margin-top: 1rem;">
                            <label>Garantia (dias)</label>
                            <input type="number" id="os-garantia" class="input-control" placeholder="90" min="0">
                        </div>
                    </div>

                    <!-- Se√ß√£o 6: Observa√ß√µes -->
                    <div class="os-section">
                        <h4><i class="fas fa-comment"></i> Observa√ß√µes</h4>

                        <div class="input-group">
                            <label>Observa√ß√µes Internas</label>
                            <textarea id="os-observacoes" class="input-control" rows="3"
                                placeholder="Observa√ß√µes internas da oficina..."></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" id="btn-cancelar-os">Cancelar</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Salvar OS
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DETALHES DA OS -->
    <div id="modal-detalhes-os" class="modal">
        <div class="modal__backdrop"></div>
        <div class="modal-content large">
            <div class="modal-header">
                <h3><i class="fas fa-file-alt"></i> Detalhes da Ordem de Servi√ßo</h3>
                <button type="button" class="btn btn-outline" style="padding: 0.5rem 1rem;"
                    id="btn-fechar-detalhes-os">√ó</button>
            </div>
            <div class="modal-body">
                <div class="os-detalhes-container">
                    <!-- Header da OS -->
                    <div class="os-detalhes-header">
                        <div class="os-numero-badge">
                            <span class="os-label">OS N¬∫</span>
                            <span class="os-numero" id="detalhes-os-numero">#000</span>
                        </div>
                        <div class="os-status-badge-large" id="detalhes-os-status-badge">
                            <span class="status-badge status-pending">Pendente</span>
                        </div>
                        <div class="os-actions-detalhes">
                            <button class="btn btn-primary btn-sm" id="btn-ver-cliente-da-os">
                                <i class="fas fa-user"></i> Ver Cliente
                            </button>
                            <button class="btn btn-primary btn-sm" id="btn-editar-os-detalhes">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn btn-success btn-sm" id="btn-imprimir-os">
                                <i class="fas fa-print"></i> Imprimir
                            </button>
                        </div>
                    </div>

                    <!-- Informa√ß√µes do Cliente -->
                    <div class="os-info-section">
                        <h4><i class="fas fa-user"></i> Cliente</h4>
                        <div class="info-grid-2col">
                            <div>
                                <span class="info-label">Nome:</span>
                                <span class="info-value" id="detalhes-cliente-nome">-</span>
                            </div>
                            <div>
                                <span class="info-label">Telefone:</span>
                                <span class="info-value" id="detalhes-cliente-telefone">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Informa√ß√µes do Ve√≠culo -->
                    <div class="os-info-section">
                        <h4><i class="fas fa-car"></i> Ve√≠culo</h4>
                        <div class="info-grid-2col">
                            <div>
                                <span class="info-label">Modelo:</span>
                                <span class="info-value" id="detalhes-veiculo-modelo">-</span>
                            </div>
                            <div>
                                <span class="info-label">Placa:</span>
                                <span class="info-value" id="detalhes-veiculo-placa">-</span>
                            </div>
                            <div>
                                <span class="info-label">Ano:</span>
                                <span class="info-value" id="detalhes-veiculo-ano">-</span>
                            </div>
                            <div>
                                <span class="info-label">KM:</span>
                                <span class="info-value" id="detalhes-km">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Servi√ßo -->
                    <div class="os-info-section">
                        <h4><i class="fas fa-wrench"></i> Servi√ßo</h4>
                        <div class="info-text-block">
                            <span class="info-label">Problema Relatado:</span>
                            <p id="detalhes-problema">-</p>
                        </div>
                        <div class="info-text-block">
                            <span class="info-label">Diagn√≥stico T√©cnico:</span>
                            <p id="detalhes-diagnostico">-</p>
                        </div>
                        <div class="info-text-block">
                            <span class="info-label">Servi√ßos Realizados:</span>
                            <p id="detalhes-servicos">-</p>
                        </div>
                        <div class="info-text-block">
                            <span class="info-label">Pe√ßas Utilizadas:</span>
                            <p id="detalhes-pecas">-</p>
                        </div>
                    </div>

                    <!-- Valores -->
                    <div class="os-info-section os-valores-section">
                        <h4><i class="fas fa-dollar-sign"></i> Valores</h4>
                        <div class="valores-grid">
                            <div class="valor-item">
                                <span class="valor-label">M√£o de Obra:</span>
                                <span class="valor-value" id="detalhes-valor-mao-obra">R$ 0,00</span>
                            </div>
                            <div class="valor-item">
                                <span class="valor-label">Pe√ßas:</span>
                                <span class="valor-value" id="detalhes-valor-pecas">R$ 0,00</span>
                            </div>
                            <div class="valor-item valor-total">
                                <span class="valor-label">TOTAL:</span>
                                <span class="valor-value" id="detalhes-valor-total">R$ 0,00</span>
                            </div>
                            <div class="valor-item">
                                <span class="valor-label">Pago:</span>
                                <span class="valor-value" id="detalhes-valor-pago">R$ 0,00</span>
                            </div>
                            <div class="valor-item valor-restante">
                                <span class="valor-label">Restante:</span>
                                <span class="valor-value" id="detalhes-valor-restante">R$ 0,00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Datas e Informa√ß√µes Adicionais -->
                    <div class="os-info-section">
                        <h4><i class="fas fa-calendar"></i> Datas e Informa√ß√µes</h4>
                        <div class="info-grid-2col">
                            <div>
                                <span class="info-label">Data de Abertura:</span>
                                <span class="info-value" id="detalhes-data-abertura">-</span>
                            </div>
                            <div>
                                <span class="info-label">Previs√£o de Entrega:</span>
                                <span class="info-value" id="detalhes-data-previsao">-</span>
                            </div>
                            <div>
                                <span class="info-label">Forma de Pagamento:</span>
                                <span class="info-value" id="detalhes-forma-pagamento">-</span>
                            </div>
                            <div>
                                <span class="info-label">Garantia:</span>
                                <span class="info-value" id="detalhes-garantia">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Observa√ß√µes -->
                    <div class="os-info-section" id="detalhes-observacoes-section">
                        <h4><i class="fas fa-comment"></i> Observa√ß√µes</h4>
                        <p id="detalhes-observacoes">-</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL ENTRADA/SA√çDA CAIXA -->
    <div id="modal-caixa" class="modal">
        <div class="modal__backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-caixa-titulo"><i class="fas fa-arrow-down"></i> Nova Entrada</h3>
                <button type="button" class="btn btn-outline" style="padding: 0.5rem 1rem;"
                    id="btn-fechar-modal-caixa">√ó</button>
            </div>
            <form id="form-caixa">
                <div class="modal-body">
                    <input type="hidden" id="caixa-tipo">

                    <div class="input-group">
                        <label>Descri√ß√£o *</label>
                        <input type="text" id="caixa-descricao" class="input-control"
                            placeholder="Ex: Pagamento OS #001, Venda de pe√ßa..." required>
                    </div>

                    <div class="os-form-grid">
                        <div class="input-group">
                            <label>Data *</label>
                            <input type="date" id="caixa-data" class="input-control" required>
                        </div>
                        <div class="input-group">
                            <label>Valor (R$) *</label>
                            <input type="number" id="caixa-valor" class="input-control" placeholder="0.00" step="0.01"
                                min="0" required>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Forma de Pagamento</label>
                        <select id="caixa-forma-pagamento" class="input-control">
                            <option value="">Selecione</option>
                            <option value="dinheiro">Dinheiro</option>
                            <option value="pix">PIX</option>
                            <option value="debito">Cart√£o de D√©bito</option>
                            <option value="credito">Cart√£o de Cr√©dito</option>
                            <option value="boleto">Boleto</option>
                            <option value="cheque">Cheque</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Categoria</label>
                        <select id="caixa-categoria" class="input-control">
                            <option value="">Selecione</option>
                            <option value="venda_os">Venda de OS</option>
                            <option value="venda_pecas">Venda de Pe√ßas</option>
                            <option value="servico">Servi√ßo Adicional</option>
                            <option value="devolucao">Devolu√ß√£o</option>
                            <option value="outros">Outros</option>
                            <option value="fornecedor">Fornecedor</option>
                            <option value="funcionarios">Funcion√°rios</option>
                            <option value="aluguel">Aluguel</option>
                            <option value="utilidades">Utilidades</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Status</label>
                        <select id="caixa-status" class="input-control">
                            <option value="confirmado" selected>Confirmado</option>
                            <option value="pendente">Pendente</option>
                            <option value="cancelado">Cancelado</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Observa√ß√µes</label>
                        <textarea id="caixa-observacoes" class="input-control" rows="3"
                            placeholder="Notas adicionais..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" id="btn-cancelar-caixa">Cancelar</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>


    <!-- Toast Container -->
    <div id="toast-container" style="position:fixed; bottom: 20px; right:20px; z-index:9999;"></div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/relatorios.js"></script>
    <script src="js/router.js"></script>
    <script src="js/clientes.js"></script>
    <script src="js/os.js"></script>
    <script src="js/caixa.js"></script>
    <script src="js/dashboard.js"></script>
</body>

</html>