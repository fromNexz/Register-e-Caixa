<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <title>Oficina Manager</title>
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/components.css" />
</head>

<body>
    <div class="app">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar__brand">
                <div class="brand-title">Oficina Manager</div>
                <div class="brand-subtitle">Sistema de Gestão</div>
            </div>

            <nav class="sidebar__nav">
                <button class="nav-item active" data-view="dashboard">
                    <img class="nav-icon" src="assets/icons/dashboard.svg" alt="" />
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" data-view="clientes">
                    <img class="nav-icon" src="assets/icons/clientes.svg" alt="" />
                    <span>Clientes</span>
                </button>
                <button class="nav-item" data-view="os">
                    <img class="nav-icon" src="assets/icons/os.svg" alt="" />
                    <span>Ordens de Serviço</span>
                </button>
                <button class="nav-item" data-view="caixa">
                    <img class="nav-icon" src="assets/icons/caixa.svg" alt="" />
                    <span>Caixa</span>
                </button>
                <button class="nav-item" data-view="relatorios">
                    <img class="nav-icon" src="assets/icons/relatorios.svg" alt="" />
                    <span>Relatórios</span>
                </button>
            </nav>
        </aside>

        <!-- CONTEÚDO -->
        <main class="main">
            <!-- DASHBOARD -->
            <section id="view-dashboard" class="view active">
                <header class="page-header">
                    <div>
                        <h1>Dashboard</h1>
                        <p>Visão geral do seu negócio</p>
                    </div>
                </header>

                <div class="cards-grid">
                    <div class="card">
                        <span class="card-label">Total Entradas</span>
                        <strong id="dash-total-entradas">R$ 0,00</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Total Saídas</span>
                        <strong id="dash-total-saidas">R$ 0,00</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Saldo</span>
                        <strong id="dash-saldo">R$ 0,00</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">OS Pendentes</span>
                        <strong id="dash-os-pendentes">0</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Clientes c/ Pendência</span>
                        <strong id="dash-clientes-pendentes">0</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Total Clientes</span>
                        <strong id="dash-total-clientes">0</strong>
                    </div>
                </div>
            </section>

            <!-- CLIENTES -->
            <section id="view-clientes" class="view">
                <header class="page-header">
                    <div>
                        <h1>Clientes</h1>
                        <p>Gerencie seus clientes e pendências</p>
                    </div>
                    <button class="btn primary" id="btn-novo-cliente">+ Novo Cliente</button>
                </header>

                <div class="page-toolbar">
                    <input type="text" id="clientes-busca" class="input"
                        placeholder="Buscar por nome, telefone ou email..." />
                </div>

                <div class="card table-card">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Contato</th>
                                <th>CPF/CNPJ</th>
                                <th>Status</th>
                                <th class="col-acoes">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="clientes-tbody">
                            <tr class="empty-row">
                                <td colspan="4">Nenhum cliente encontrado</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Modal simples de cliente -->
                <div id="modal-cliente" class="modal">
                    <div class="modal__backdrop"></div>
                    <div class="modal__content">
                        <header class="modal__header">
                            <h2 id="modal-cliente-titulo">Novo Cliente</h2>
                        </header>
                        <form id="form-cliente" class="modal__body">
                            <input type="hidden" id="cliente-id" />
                            <label>
                                Nome
                                <input type="text" id="cliente-nome" required />
                            </label>
                            <label>
                                Telefone
                                <input type="text" id="cliente-telefone" />
                            </label>
                            <label>
                                Endereço
                                <input type="text" id="cliente-endereco" />
                            </label>
                            <label>
                                Modelo do veículo
                                <input type="text" id="cliente-veiculo-modelo" placeholder="Ex: Gol 1.6" />
                            </label>
                            <label>
                                Ano do veículo
                                <input type="text" id="cliente-veiculo-ano" placeholder="Ex: 2014" />
                            </label>

                            <label>
                                Placa
                                <input type="text" id="cliente-veiculo-placa" placeholder="Ex: ABC-1234" />
                            </label>
                            <label>
                                Email
                                <input type="email" id="cliente-email" />
                            </label>
                            <label>
                                CPF/CNPJ
                                <input type="text" id="cliente-documento" />
                            </label>
                            <label>
                                Observações
                                <textarea id="cliente-observacoes"></textarea>
                            </label>
                            <footer class="modal__footer">
                                <button type="button" class="btn" id="btn-cancelar-cliente">Cancelar</button>
                                <button type="submit" class="btn primary">Salvar</button>
                            </footer>
                        </form>
                    </div>
                </div>

                <div id="modal-cliente-detalhes" class="modal">
                    <div class="modal__backdrop"></div>
                    <div class="modal__content modal__content--wide">
                        <header class="modal__header">
                            <h2>Detalhes do Cliente</h2>
                        </header>
                        <div class="modal__body modal-cliente-detalhes-body">
                            <section class="cliente-info">
                                <h3>Dados do Cliente</h3>
                                <p><strong>Nome:</strong> <span id="det-cliente-nome"></span></p>
                                <p><strong>Contato:</strong> <span id="det-cliente-contato"></span></p>
                                <p><strong>CPF/CNPJ:</strong> <span id="det-cliente-doc"></span></p>
                                <p><strong>Endereço:</strong> <span id="det-cliente-endereco"></span></p>
                                <p><strong>Observações:</strong> <span id="det-cliente-obs"></span></p>
                            </section>

                            <section class="cliente-historico">
                                <h3>Histórico de Serviços</h3>
                                <div class="card table-card">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>OS Nº</th>
                                                <th>Data</th>
                                                <th>Descrição</th>
                                                <th>Valor</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="det-cliente-os-tbody">
                                            <tr class="empty-row">
                                                <td colspan="5">Nenhum serviço registrado para este cliente</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </section>
                        </div>
                        <footer class="modal__footer">
                            <button type="button" class="btn" id="btn-fechar-detalhes-cliente">Fechar</button>
                        </footer>
                    </div>
                </div>

            </section>

            <!-- ORDENS DE SERVIÇO -->
            <section id="view-os" class="view">
                <header class="page-header">
                    <div>
                        <h1>Ordens de Serviço</h1>
                        <p>Gerencie as ordens de serviço e parcelas</p>
                    </div>
                    <button class="btn primary" id="btn-nova-os">+ Nova OS</button>
                </header>

                <div class="page-toolbar">
                    <input type="text" id="os-busca" class="input"
                        placeholder="Buscar por número da OS ou cliente..." />
                </div>

                <div class="card table-card">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>OS Nº</th>
                                <th>Cliente</th>
                                <th>Veículo</th>
                                <th>Valor</th>
                                <th>Status</th>
                                <th class="col-acoes">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="os-tbody">
                            <tr class="empty-row">
                                <td colspan="6">Nenhuma ordem de serviço encontrada</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="modal-os" class="modal">
                    <div class="modal__backdrop"></div>
                    <div class="modal__content modal__content--wide">
                        <header class="modal__header">
                            <h2 id="modal-os-titulo">Nova OS</h2>
                        </header>

                        <form id="form-os" class="modal__body modal-os-body">
                            <input type="hidden" id="os-id" />

                            <section class="os-dados">
                                <h3>Dados da OS</h3>

                                <label>
                                    Cliente
                                    <div class="select-wrapper">
                                        <select id="os-cliente-id" required></select>
                                    </div>
                                </label>

                                <label>
                                    Veículo (opcional)
                                    <input type="text" id="os-veiculo" placeholder="Ex: Gol 1.6 2014" />
                                </label>

                                <div class="grid-2">
                                    <label>
                                        Data de abertura
                                        <input type="date" id="os-data-abertura" />
                                    </label>

                                    <label>
                                        Status
                                        <div class="select-wrapper">
                                            <select id="os-status">
                                                <option value="aberto">Aberto</option>
                                                <option value="em_andamento">Em andamento</option>
                                                <option value="concluido">Concluído</option>
                                                <option value="cancelado">Cancelado</option>
                                            </select>
                                        </div>
                                    </label>
                                </div>

                                <label>
                                    Descrição do serviço
                                    <textarea id="os-descricao" placeholder="Resumo do serviço realizado"></textarea>
                                </label>

                                <label>
                                    Valor total (R$)
                                    <input type="number" step="0.01" id="os-valor-total" />
                                </label>
                            </section>

                            <section class="os-pagamento">
                                <h3>Condições de Pagamento</h3>

                                <div class="grid-2">
                                    <label>
                                        Nº de parcelas
                                        <input type="number" id="os-numero-parcelas" min="1" value="1" />
                                    </label>
                                    <label>
                                        Data 1ª parcela
                                        <input type="date" id="os-data-primeira-parcela" />
                                    </label>
                                </div>

                                <button type="button" class="btn" id="btn-gerar-parcelas">Gerar Parcelas</button>

                                <div class="card table-card" style="margin-top: 12px;">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Vencimento</th>
                                                <th>Valor (R$)</th>
                                                <th>Pago?</th>
                                                <th>Data pag.</th>
                                                <th>Forma Pgto</th>
                                            </tr>
                                        </thead>
                                        <tbody id="os-parcelas-tbody">
                                            <tr class="empty-row">
                                                <td colspan="6">Nenhuma parcela gerada</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </section>

                            <footer class="modal__footer">
                                <button type="button" class="btn" id="btn-cancelar-os">Cancelar</button>
                                <button type="submit" class="btn primary">Salvar OS</button>
                            </footer>
                        </form>
                    </div>
                </div>


            </section>



            <!-- CAIXA -->
            <section id="view-caixa" class="view">
                <header class="page-header">
                    <div>
                        <h1>Caixa</h1>
                        <p>Controle de entradas e saídas</p>
                    </div>
                    <div class="page-header-actions">
                        <button class="btn success" id="btn-nova-entrada">Nova Entrada</button>
                        <button class="btn danger" id="btn-nova-saida">Nova Saída</button>
                    </div>
                </header>

                <div class="cards-grid cards-grid--caixa">
                    <div class="card">
                        <span class="card-label">Total Entradas</span>
                        <strong id="caixa-total-entradas">R$ 0,00</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Total Saídas</span>
                        <strong id="caixa-total-saidas">R$ 0,00</strong>
                    </div>
                    <div class="card">
                        <span class="card-label">Saldo</span>
                        <strong id="caixa-saldo">R$ 0,00</strong>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab active" data-caixa-filter="todas">Todas</button>
                    <button class="tab" data-caixa-filter="entrada">Entradas</button>
                    <button class="tab" data-caixa-filter="saida">Saídas</button>
                </div>

                <div class="card table-card">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Tipo</th>
                                <th>Descrição</th>
                                <th>Cliente</th>
                                <th>Forma Pgto</th>
                                <th>Valor</th>
                                <th class="col-acoes">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="caixa-tbody">
                            <tr class="empty-row">
                                <td colspan="7">Nenhuma transação encontrada</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- RELATÓRIOS -->
            <section id="view-relatorios" class="view">
                <header class="page-header">
                    <div>
                        <h1>Relatórios</h1>
                        <p>Análise financeira e operacional</p>
                    </div>
                    <button class="btn outline" id="btn-exportar-relatorio">Exportar Relatório</button>
                </header>

                <div class="card filters-card">
                    <div class="filters-row">
                        <div class="filter-field">
                            <label>Data Início</label>
                            <input type="date" id="rel-data-inicio" class="input" />
                        </div>
                        <div class="filter-field">
                            <label>Data Fim</label>
                            <input type="date" id="rel-data-fim" class="input" />
                        </div>
                        <div class="filter-field filter-field--button">
                            <button class="btn primary" id="btn-aplicar-filtros-rel">Aplicar Filtros</button>
                        </div>
                    </div>
                </div>

                <div class="tabs tabs--rel">
                    <button class="tab active" data-rel-tab="financeiro">Financeiro</button>
                    <button class="tab" data-rel-tab="operacional">Operacional</button>
                    <button class="tab" data-rel-tab="clientes">Clientes</button>
                </div>

                <div id="rel-financeiro" class="rel-tab active">
                    <div class="cards-grid">
                        <div class="card">
                            <span class="card-label">Total Entradas (período)</span>
                            <strong id="rel-ent-periodo">R$ 0,00</strong>
                        </div>
                        <div class="card">
                            <span class="card-label">Total Saídas (período)</span>
                            <strong id="rel-sai-periodo">R$ 0,00</strong>
                        </div>
                        <div class="card">
                            <span class="card-label">Saldo do Período</span>
                            <strong id="rel-saldo-periodo">R$ 0,00</strong>
                            <small id="rel-saldo-status" class="tag tag-positive">Positivo</small>
                        </div>
                    </div>

                    <div class="card table-card">
                        <h2 class="card-title">Detalhamento de Transações</h2>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Tipo</th>
                                    <th>Descrição</th>
                                    <th>Cliente</th>
                                    <th>Forma Pgto</th>
                                    <th>Valor</th>
                                </tr>
                            </thead>
                            <tbody id="rel-transacoes-tbody">
                                <tr class="empty-row">
                                    <td colspan="6">Nenhuma transação no período selecionado</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </section>
        </main>
        <div id="toast-container"></div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/router.js"></script>
    <script src="js/clientes.js"></script>
    <script src="js/main.js"></script>
    <script src="js/os.js"></script>
    <script src="js/caixa.js"></script>
    <script src="js/relatorios.js"></script>
    <script src="js/dashboard.js"></script>
</body>

</html>